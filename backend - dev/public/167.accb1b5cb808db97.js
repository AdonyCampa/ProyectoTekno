"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[167],{167:(X,_,l)=>{l.r(_),l.d(_,{DescuentosModule:()=>L});var p=l(6814),f=l(9140),m=l(5219),e=l(9291),M=l(2703),a=l(6361),h=l(707),r=l(6223),D=l(4480),b=l(4104),Z=l(6340),x=l(3714),C=l(6218),T=l(7213),v=l(2655);function q(n,i){if(1&n&&e._UZ(0,"p-breadcrumb",19),2&n){const t=e.oxw();e.Q6J("model",t.items)("home",t.home)}}function N(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openNew())}),e.qZA()}}function J(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"h5",22),e._uU(2,"Descuentos registrados"),e.qZA(),e.TgZ(3,"span",23),e._UZ(4,"i",24),e.TgZ(5,"input",25),e.NdJ("input",function(o){e.CHM(t);const c=e.oxw(),u=e.MAs(8);return e.KtG(c.onGlobalFilter(u,o))}),e.qZA()()()}}function y(n,i){1&n&&(e.TgZ(0,"tr")(1,"th",26),e._uU(2," ID "),e._UZ(3,"p-sortIcon",27),e.qZA(),e.TgZ(4,"th",28),e._uU(5," Nombre "),e._UZ(6,"p-sortIcon",29),e.qZA(),e.TgZ(7,"th",30),e._uU(8," Descuento "),e._UZ(9,"p-sortIcon",31),e.qZA(),e.TgZ(10,"th",32),e._uU(11," Descripcion "),e._UZ(12,"p-sortIcon",33),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Acciones"),e.qZA()())}function U(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td",34)(2,"span",35),e._uU(3,"Id"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"td",34)(6,"span",35),e._uU(7,"Nombre"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"td",34)(10,"span",35),e._uU(11,"Descuento"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",36)(14,"span",35),e._uU(15,"Descripcion"),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"td")(18,"div",37)(19,"button",38),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.editDescuento(c))}),e.qZA(),e.TgZ(20,"button",39),e.NdJ("click",function(){const c=e.CHM(t).$implicit,u=e.oxw();return e.KtG(u.deleteDescuento(c))}),e.qZA()()()()}if(2&n){const t=i.$implicit;e.xp6(4),e.hij(" ",t.id," "),e.xp6(4),e.hij(" ",t.nombre," "),e.xp6(4),e.hij(" ",t.descuento," "),e.xp6(4),e.hij(" ",t.descripcion," ")}}function w(n,i){1&n&&(e.TgZ(0,"small",47),e._uU(1,"El nombre es requerido."),e.qZA())}function E(n,i){1&n&&(e.TgZ(0,"small",47),e._uU(1,"El descuento es requerido."),e.qZA())}const d=function(n){return{"ng-invalid ng-dirty":n}};function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"label",41),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"input",42),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.descuento.nombre=o)}),e.qZA(),e.YNc(4,w,2,0,"small",43),e.qZA(),e.TgZ(5,"div",40)(6,"label",41),e._uU(7,"Descuento"),e.qZA(),e.TgZ(8,"input",44),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.descuento.descuento=o)}),e.qZA(),e.YNc(9,E,2,0,"small",43),e.qZA(),e.TgZ(10,"div",40)(11,"label",45),e._uU(12,"Descripcion"),e.qZA(),e.TgZ(13,"textarea",46),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.descuento.descripcion=o)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.descuento.nombre)("ngClass",e.VKq(8,d,t.submitted&&!t.descuento.nombre)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.descuento.nombre),e.xp6(4),e.Q6J("ngModel",t.descuento.descuento)("ngClass",e.VKq(10,d,t.submitted&&!t.descuento.descuento)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.descuento.descuento),e.xp6(4),e.Q6J("ngModel",t.descuento.descripcion)("autoResize",!0)}}function G(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideDialog())}),e.qZA(),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveDescuento())}),e.qZA()}}function H(n,i){1&n&&(e.TgZ(0,"small",47),e._uU(1,"El nombre es requerido."),e.qZA())}function S(n,i){1&n&&(e.TgZ(0,"small",47),e._uU(1,"El descuento es requerido."),e.qZA())}function F(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"label",41),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"input",42),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.descuento.nombre=o)}),e.qZA(),e.YNc(4,H,2,0,"small",43),e.qZA(),e.TgZ(5,"div",40)(6,"label",41),e._uU(7,"Descuento"),e.qZA(),e.TgZ(8,"input",44),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.descuento.descuento=o)}),e.qZA(),e.YNc(9,S,2,0,"small",43),e.qZA(),e.TgZ(10,"div",40)(11,"label",45),e._uU(12,"Descripcion"),e.qZA(),e.TgZ(13,"textarea",46),e.NdJ("ngModelChange",function(o){e.CHM(t);const c=e.oxw();return e.KtG(c.descuento.descripcion=o)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.descuento.nombre)("ngClass",e.VKq(8,d,t.submitted&&!t.descuento.nombre)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.descuento.nombre),e.xp6(4),e.Q6J("ngModel",t.descuento.descuento)("ngClass",e.VKq(10,d,t.submitted&&!t.descuento.descuento)),e.xp6(1),e.Q6J("ngIf",t.submitted&&!t.descuento.descuento),e.xp6(4),e.Q6J("ngModel",t.descuento.descripcion)("autoResize",!0)}}function I(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.hideEditDialog())}),e.qZA(),e.TgZ(1,"button",49),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editBodyDescuento())}),e.qZA()}}function Q(n,i){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"Are you sure you want to delete "),e.TgZ(2,"b"),e._uU(3),e.qZA(),e._uU(4,"?"),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",t.descuento.nombre," ")}}function Y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteDescuentoDialog=!1)}),e.qZA(),e.TgZ(1,"button",51),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.confirmDelete())}),e.qZA()}}const R=function(){return["id","nombre","descuento","descripcion"]},k=function(){return[10,20,30]},g=function(){return{width:"450px"}};let B=(()=>{var n;class i{constructor(s,o){this.descuentosService=s,this.messageService=o,this.descuentoDialog=!1,this.descuentoEditDialog=!1,this.deleteDescuentoDialog=!1,this.deleteDescuentosDialog=!1,this.descuentos=[],this.descuento={},this.submitted=!1,this.cols=[],this.rowsPerPageOptions=[5,10,20]}ngOnInit(){this.getDescuentos(),this.suscription=this.descuentosService.refresh$.subscribe(()=>this.getDescuentos()),this.items=[{label:"Ajustes"},{label:"Mantenimientos"},{label:"Documentos"},{label:"Descuentos"}],this.home={icon:"pi pi-home",routerLink:"/inicio"},this.cols=[{field:"id",header:"Id"},{field:"nombre",header:"descuento"},{field:"descuento",header:"descuento"},{field:"descripcion",header:"Descripcion"}]}getDescuentos(){this.descuentosService.getDescuentos().then(s=>this.descuentos=s)}ngOnDestroy(){this.suscription.unsubscribe()}openNew(){this.descuento={},this.submitted=!1,this.descuentoDialog=!0}editDescuento(s){this.descuento={...s},this.descuentoEditDialog=!0}deleteDescuento(s){this.deleteDescuentoDialog=!0,this.descuento={...s}}confirmDelete(){const{id:s}=this.descuento;this.deleteDescuentoDialog=!1,this.descuentosService.deleteDescuento(s).subscribe(o=>{this.messageService.add(!0===o?{severity:"success",summary:"Exito",detail:"Descuento eliminado exitosamente",life:3e3}:{severity:"error",summary:"Error",detail:o,life:3e3})}),this.deleteDescuentoDialog=!1,this.descuento={}}hideDialog(){this.descuentoDialog=!1,this.submitted=!1}hideEditDialog(){this.descuentoEditDialog=!1,this.submitted=!1}saveDescuento(){this.submitted=!0;const{nombre:s,descuento:o,descripcion:c}=this.descuento;this.descuento.nombre?.trim()&&(this.descuentosService.createDescuento(s,o,c).subscribe(u=>{!0===u?(this.messageService.add({severity:"success",summary:"Exito",detail:"Descuento creado exitosamente",life:3e3}),this.descuentoDialog=!1,this.descuento={}):this.messageService.add({severity:"error",summary:"Error",detail:u,life:3e3})}),this.descuentos=[...this.descuentos])}editBodyDescuento(){this.submitted=!0;const{id:s,nombre:o,descuento:c,descripcion:u}=this.descuento;this.descuento.nombre?.trim()&&(this.descuentosService.updateDescuento(s,o,c,u).subscribe(A=>{!0===A?(this.messageService.add({severity:"success",summary:"Exito",detail:"Descuento actualizado exitosamente",life:3e3}),this.descuentoEditDialog=!1,this.descuento={}):this.messageService.add({severity:"error",summary:"Error",detail:A,life:3e3})}),this.descuentos=[...this.descuentos])}onGlobalFilter(s,o){s.filterGlobal(o.target.value,"contains")}}return(n=i).\u0275fac=function(s){return new(s||n)(e.Y36(M.$),e.Y36(m.ez))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],features:[e._Bn([m.ez])],decls:23,vars:26,consts:[[1,"grid"],[1,"col-12"],[1,"card","px-6","py-6"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} entradas","dataKey","id",3,"value","columns","rows","globalFilterFields","paginator","rowsPerPageOptions","showCurrentPageReport","rowHover"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Crear nuevo descuento",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["header","Editar descuento seleccionado",1,"p-fluid",3,"visible","modal","visibleChange"],["header","Confirmar",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center"],[1,"pi","pi-exclamation-triangle","mr-3",2,"font-size","2rem"],[4,"ngIf"],[1,"max-w-full",3,"model","home"],["pButton","","pRipple","","label","Crear Descuento","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","flex-column","md:flex-row","md:justify-content-between","md:align-items-center"],[1,"m-0"],[1,"block","mt-2","md:mt-0","p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar...",1,"w-full","sm:w-auto",3,"input"],["pSortableColumn","id"],["field","id"],["pSortableColumn","nombre"],["field","nombre"],["pSortableColumn","descuento"],["field","descuento"],["pSortableColumn","descripcion"],["field","descripcion"],[2,"width","14%","min-width","10rem"],[1,"p-column-title"],[2,"width","14%","min-width","8rem"],[1,"flex"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-info","mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-danger",3,"click"],[1,"field"],["for","descuento"],["type","text","pInputText","","id","nombre","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["class","ng-dirty ng-invalid",4,"ngIf"],["type","text","pInputText","","id","descuento","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["for","descripcion"],["id","descripcion","pInputTextarea","","required","","autofocus","","cols","20","rows","3",3,"ngModel","autoResize","ngModelChange"],[1,"ng-dirty","ng-invalid"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-check",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-times","label","No",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Yes",1,"p-button-text",3,"click"]],template:function(s,o){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"p-toast"),e.TgZ(4,"p-toolbar",3),e.YNc(5,q,1,2,"ng-template",4),e.YNc(6,N,1,0,"ng-template",5),e.qZA(),e.TgZ(7,"p-table",6,7),e.YNc(9,J,6,0,"ng-template",8),e.YNc(10,y,15,0,"ng-template",9),e.YNc(11,U,21,4,"ng-template",10),e.qZA()(),e.TgZ(12,"p-dialog",11),e.NdJ("visibleChange",function(u){return o.descuentoDialog=u}),e.YNc(13,K,14,12,"ng-template",12),e.YNc(14,G,2,0,"ng-template",13),e.qZA(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(u){return o.descuentoEditDialog=u}),e.YNc(16,F,14,12,"ng-template",12),e.YNc(17,I,2,0,"ng-template",13),e.qZA(),e.TgZ(18,"p-dialog",15),e.NdJ("visibleChange",function(u){return o.deleteDescuentoDialog=u}),e.TgZ(19,"div",16),e._UZ(20,"i",17),e.YNc(21,Q,5,1,"span",18),e.qZA(),e.YNc(22,Y,2,0,"ng-template",13),e.qZA()()()),2&s&&(e.xp6(7),e.Q6J("value",o.descuentos)("columns",o.cols)("rows",10)("globalFilterFields",e.DdM(21,R))("paginator",!0)("rowsPerPageOptions",e.DdM(22,k))("showCurrentPageReport",!0)("rowHover",!0),e.xp6(5),e.Akn(e.DdM(23,g)),e.Q6J("visible",o.descuentoDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(24,g)),e.Q6J("visible",o.descuentoEditDialog)("modal",!0),e.xp6(3),e.Akn(e.DdM(25,g)),e.Q6J("visible",o.deleteDescuentoDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",o.descuento))},dependencies:[p.mk,p.O5,a.iA,m.jx,a.lQ,a.fz,h.Hq,r.Fj,r.JJ,r.Q7,r.On,D.H,b.FN,Z.o,x.o,C.g,T.V,v.a],encapsulation:2}),i})(),j=(()=>{var n;class i{}return(n=i).\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild([{path:"",component:B}]),f.Bz]}),i})();var z=l(5006),P=l(6022),O=l(3965),V=l(1865),$=l(354);let L=(()=>{var n;class i{}return(n=i).\u0275fac=function(s){return new(s||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,j,a.U$,z.O,r.u5,h.hJ,D.T,b.EV,Z.V,P.Xt,x.j,C.A,O.kW,V.cc,$.L$,T.S,v.w]}),i})()}}]);